# 7장 응용 계층 : 애플리케이션에 데이터 전송하기



## LESSON 28 응용 계층의 역할

- 애플리케이션은 서비스를 요청하는 측(클라이언트)과 제공하는 측(서버)의 관점에서 볼 수 있다.
- 이런 애플리케이션을 동작하는 계층을 응용 계층이라고 한다.
- 세션 계층과 표현 계층을 포함한다.
- 클라이언트의 요청을 전달하기 위해 서버가 이해할 수 있는 메시지(데이터)로 변환하고 전송 계층으로 전달하는 역할을 한다.
- 클라이언트 측 애플리케이션이 서버 측 애플리케이션과 통신하려면 응용 계층의 프로토콜을 사용해야한다.
  - HTTP : 웹 사이트를 볼 때
  - FTP : 파일 전송
  - SMTP : 메일 보낼 때
  - POP3 : 메일 받을 때
- 네트워크에서 컴퓨터나 네트워크 장비에 붙여진 이름을 기반으로 IP 주소를 알아내는 것을 **이름 해석**이라고 하는데, 이를 위해 DNS(Domain Name System)을 사용한다.
- 응용 계층은 각각의 애플리케이션에 대응되는 데이터를 전송하는 역할을 한다.
- 응용 계층에서 보내려는 데이터는 하위 계층인 전송 계층, 네트워크 계층, 데이터 링크 계층, 물리 계층 순서로 처리된다.



## LESSON 29 웹 서버의 구조 (웹 사이트 접속)

### WWW

- WWW(웹)는 HTML,URL,HTTP라는 세 가지 기술이 사용된다

### HTTP

- 클라이언트는 웹 사이트를 보기 위해 서버(웹 서버 프로그램)의 80번 포트를 사용하여 HTTP통신을 한다.
- 클라이언트에서 HTTP 요청을 하면 서버는 HTTP 응답을 한다.
  - 데이터 요청 시 : "GET"이라고 하는 요청 정보, 파일 이름, 버전 등을 서버에 전송
    - ex) GET/index.html HTTP/1.1
  - 서버 응답 시: 요청을 정상적으로 처리했다는 "OK"라는 정보를 반환하고 index.html을 클라이언트에게 보낸다.
    - ex) HTTP/1.1 200 OK
- 과거 HTTP/1.0 버전에서는 요청을 보낼 때마다 연결했다 끊는 작업을 반복해 웹 페이지가 느리게 보였다.
- HTTP/1.1 버전에서는 keepalive라는 기능이 추가되었는데 이는 연결을 한 번 수립하면 데이터 교환을 마칠 때까지 유지하고, 데이터 교환을 모두 끝내면 연결을 끊는다.
  - 각 개별의 요청마다 이에 대응하는 응답을 반환하면 추가적으로 요청을 한다.
- HTTP/2 버전에서는 요청을 보낸 순서와는 무관하게 응답을 하여 HTTP/1.1 버전에서 이전 요청을 처리하는 데 시간이 길어져 다음 요청에 대한 처리가 늦어지는 단점을 보완하였다.



## LESSON 30 DNS 서버의 구조 (이름 해석)

### 도메인 이름

- DNS는 URL을 IP 주소로 변환하는 서비스(시스템)이다.
- 우리가 웹 서버에 접속할 때 IP 주소가 아닌 URL을 입력하는 것은 DNS의 이름 해석을 사용하기 때문이다.
- 도메인 이름에 해당하는 IP 주소를 알아내기 위해 컴퓨터와 DNS 서버 사이의 통신 교환이 필요하다.
- 요청한 첫 번째 DNS 서버가 도메인의 IP 주소를 모르는 경우에는 다른 DNS 서버로 요청받은 첫번째 DNS 서버가 질의한다.
- DNS 서버는 전 세계에 흩어져 있고 모두 계층적으로 연결되어 있다.



## LESSON 31 메일 서버의 구조 (SMTP와 POP3)



### 메일의 송수신 구조

- 메일을 보낼 때 사용되는 프로토콜은 SMTP(25번 포트), 받을 때 사용되는 프로토콜은 POP3(110번 포트)
- SMTP는 서버 간의 메일 전송에도 이용
- 사용하는 메일 프로그램에 메일 서비스를 제공하는 메일 서버의 호스트 이름(서버 이름)을 설정하면 메일 서버 사용 가능



### SMTP에 의한 메일 송신과 메일 전송

1. 컴퓨터에서 서버로 세션 시작을 통지한다(서버는 이에 대해 응답, 이후 과정 동일)
2. 송신자의 메일 주소를 통지한다.
3. 목적지 메일 주소를 통지한다.
4. 메일 본문 전송을 통지한다.
5. 메일 본문을 송신한다.
6. 세션 종료를 통지한다.



### POP3에 의한 메일 수신

- 메일 서버에는 메일 박스라는 메일을 보관해 주는 기능이 있다.

- 메일 서버는 POP3를 사용하여 서버의 메일 박스에서 메일을 가져와서 목적지 컴퓨터로 전송한다.

- 메일을 수신할 때는 사용자 이름과 비밀번호를 이용한 사용자 인증이 필요하다.

  > 시스템에 접근하려는 사용자가 올바른 사용자인지 판별

  1. 세션 시작을 통지한다.
  2. 수신자의 사용자 이름을 통지한다.(서버는 확인 응답 반환, 이후 동일)
  3. 수신자의 비밀번호를 통지한다.
  4. 메일이 있는지 확인한다.
  5. 메일박스에 보관된 메일의 전송을 요청하고 이메일을 전송받는다.
  6. 세션 종료를 통지한다.



## ping 명령

- 목적지 컴퓨터와의 통신을 확인하기 위해 ping 명령을 이용한다.
- ICMP라는 프로토콜을 사용하여 목적지 컴퓨터에 ICMP 패킷을 전송하고 패킷에 대한 응답이 제대로 오는지 확인하는 명령이다.
- ping명령이 정상으로 실행되면 네트워크 연결이 정상이라고 판단할 수 있으므로 문제를 확인할 대 자주 사용한다.