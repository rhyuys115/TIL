# 5장 네트워크 계층 : 목적지에 데이터 전달하기

> OSI 모델의 3계층인 네트워크 계층에 대해서 설명



## LESSON 17 네트워크 계층의 역할



### 네트워크 간의 연결 구조

- 데이터 링크 계층의 기능만으로는 해당 네트워크 안에서만 통신이 가능
- 네트워크 간의 통신을 가능하게 하는 것이 네트워크 계층의 역할
- 다른 네트워크로 데이터를 전송하려면 **라우터**라는 네트워크 장비가 필요
  - 라우터는 데이터의 목적지가 정해지면 해당 목적지까지 어떤 경로로 가는 것이 좋은지 알려 주는 기능
- 랜에서는 MAC 주소를 이용하였듯이, 다른 네트워크로 데이터를 보낼 때 **IP 주소**이용
- 목적지 IP 주소까지 어떤 경로로 데이터를 보낼지 결정하는 것을 **라우팅(routing)**이라고 한다.
- 라우팅은 라우터라는 장비가 하는데 이를 이용해서 거리에 관계없이 다른 네트워크로 데이터를 보낼 수 있다.
  - 라우팅 테이블로 경로 정보를 등록하고 관리한다.



### IP

- 네트워크 계층에서 캡슐화 할 때 IP헤더를 붙인다.
- 헤더 정보는 12가지 항목으로 이루어져 있는데 '출발지 IP 주소' 와 '목적지 IP 주소' 가 이에 포함된다.
- 이런 IP 헤더가 추가된 데이터를 **IP 패킷**이라고 한다.



## LESSON 18 IP 주소의 구조



### IP주소

- IP 주소는 인터넷 서비스 제공자(ISP)에게 받을 수 있다.
- IP 버전에는 **IPv4**(32비트-약43억개)와 **IPv6**(128비트-약340간개)가 있다.
  - IPv4 주소는 사용할 수 있는 주소의 수가 고갈되고 있어 이를 해결하기 위해 새로운 버전 IPv6
- 인터넷에 직접 연결되는 컴퓨터나 라우터에는 공인 IP 주소 할당
- 회사나 가정의 랜에 있는 컴퓨터는 사설 IP 주소를 할당
- 랜 안에 컴퓨터가 여러 대 있는 경우 공인 IP 주소는 사용할 수 있는 숫자가 제한되기 때문에 라우터에만 공인 IP 주소를 할당하고, 랜 안에 있는 컴퓨터는 랜의 네트워크 관리자가 자유롭게 사설 IP 주소를 할당하거나 라우터의 DHCP 기능을 사용하여 주소를 자동으로 할당
- IP 주소는 네트워크 ID(어떤 네트워크인지)와 호스트 ID(해당 네트워크의 어느 컴퓨터이지)로 나눠져 있다.



## LESSON 19 IP 주소의 클래스 구조



### IP 주소 클래스

- 네트워크 ID를 크게 만들거나 호스트 ID를 작게 만들어 네트워크 크기를 조정 가능
- 네트워크 크기는 클래스라는 개념으로 구분

| 클래스 이름 | 내용                  |
| ----------- | --------------------- |
| A클래스     | 대규모 네트워크 주소  |
| B클래스     | 중형 네트워크 주소    |
| C클래스     | 소규모 네트워크 주소  |
| D클래스     | 멀티캐스트 주소       |
| E클래스     | 연구 및 특수용도 주소 |

- A 클래스 : 네트워크 ID 8비트, 호스트 ID 24비트
- B 클래스 : 네트워크 ID 16비트, 호스트 ID 16비트
- C 클래스 : 네트워크 ID 24비트, 호스트 ID 8비트
- 각각의 클래스안에서 공인 IP 주소 범위와 사설 IP 주소 범위는 구분되어 있다.



## LESSON 20 네트워크 주소와 브로드캐스트 주소의 구조

- IP 주소에는 네트워크 주소와 브로드캐스트 주소가 있다.
- 이 두 주소는 특별한 주소로 컴퓨터나 라우터가 자신의 IP로 사용하면 안 되는 주소다.
  - 네트워크 주소 : 호스트 ID 가 십진수로 0
  - 호스트 주소 : 호스트 ID가 십진수로 255
- 네트워크 주소와 네트워크 ID가 같은 IP주소를 가진 컴퓨터들은 동일한 네트워크에 있다고 할 수 있다.
- 브로드캐스트 주소는 네트워크에 있는 컴퓨터나 장비 모두에게 한 번에 데이터를 존송하는 데 사용되는 전용 IP주소



## LESSON 21 서브넷의 구조



### 서브넷

- 동일 네트워크의 컴퓨터들이 브로드캐스트 패킷을 전송하면 모든 컴퓨터에 패킷이 전송되어 네트워크가 혼잡해짐.
- 서브넷팅은 이를 방지하기 위해 대규모 네트워크를 작은 네트워크로 분할하여 브로드캐스트로 전송되는 패킷의 범위를 좁힐 수 있다.
- 이렇게 분할된 네트워크를 서브넷이라고 한다.
- 호스트 ID에서 비트를 빌려 서브넷ID로 사용



### 서브넷 마스크

- IP 주소를 서브넷팅하면 네트워크 ID와 호스트 ID의 경계를 판단하기 어려운데 이를 방지하기 위해 서브넷 마스크라는 값을 사용한다.
- (/비트수)와 같은 표기로 서브넷 마스크를 나타낸 것을 프리픽스 표기법이라 한다.



## LESSON 22 라우터의 구조



###  라우터

- 라우터를 이용하여 네트워크 분리 가능
- 스위치만 이용하면 네트워크 분리 불가능
- 컴퓨터가 다른 네트워크에 데이터를 전송하려면 라우터의 IP 주소를 설정해야 되는데 이를 기본 게이트웨이라고 한다. => 다른 네트워크로 데이터를 보낼 때 1차적인 목적지를 지정하는 것!



### 라우팅

- 라우터 간에 라우팅 정보를 교환하기 위한 프로토콜을 라우팅 프로토콜(ex. RIP, OSPF, BGP)이라고 한다.
- 라우팅 프로토콜을 설정하여 라우터 간에 경로 정보를 서로 교환하고 그것을 라우팅 테이블에 등록해 나간다.
- 소규모 네트워크 - 수동으로 등록, 대규모 네트워크 - 자동으로 등록