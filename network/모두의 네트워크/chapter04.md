# 4장 데이터 링크 계층 : 랜에서 데이터 전송하기

> OSI 모델의 2계층인 데이터 링크 계층에 대해서 설명



## LESSON12 데이터 링크 계층의 역할과 이더넷



### 이더넷

- 데이터 링크 게층에서는 네트워크 장비 간에 신호를 주고받는 규칙을 정한다.
  - 랜에서 데이터를 정상적으로 주고받기 위해 필요
- **이더넷(Ethernet)**은 이 규칙들 중 일반적으로 가장 많이 사용되는 규칙
  - 랜에서 적용
  - 허브와 같은 장비에 연결된 컴퓨터와 데이터를 주고받을 때
- 허브를 사용하는 랜 환경에서는 특정한 컴퓨터 한 대에 데이터를 보내려고 해도 다른 모든 컴퓨터에 전기 신호가 전달된다. 이를 방지하기 위해 데이터에 목적지 정보를 추가하고 *목적지 이외의 컴퓨터는 데이터를 받더라도 무시하게* 되어 있다.
- 컴퓨터 여러대가 동시에 데이터를 보내면 데이터들이 충돌할 수 있는데, 이를 방지하기 위해 이더넷은 데이터가 동시에 케이블을 지나가지 않게 보내는 시점을 늦춘다. 이를 CSMA/CD라고 한다.
  - 현재는 효율 문제로 거의 사용하지 않는 방식
  - CS : 데이터를 보내려고 하는 컴퓨터가 케이블에 신호가 흐르고 있는지 아닌지 확인하는 규칙
  - MA : 케이블에 데이터가 흐르고 있지 않다면 데이터를 보내도 좋다는 규칙
  - CD : 충돌이 발생하고 있는지를 확인하는 규칙



## LESSON 13 MAC 주소의 구조



### MAC 주소

- 랜 카드를 제조할 때 새겨지는 전 세계에서 유일한 번호로 할당된 물리 주소
- 앞쪽 24비트는 랜카드 제조사, 뒤쪽 24비트는 제조사가 랜카드에 붙인 일련번호로 총 48비트 숫자로 구성
- OSI 모델의 데이터 링크 계층(TCP/IP 모델의 경우 네트워크 계층)에서는 **이더넷 헤더**와 **트레일러**를 붙인다.
- **이더넷 헤더**는 목적지의 MAC 주소(6바이트), 출발지 MAC 주소(6바이트), 유형(2바이트) 총 14바이트로 구성
- **이더넷 유형**은 이데넷으로 전송되는 상위 계층 프로토콜의 종류를 식별하는 번호
  - ex) IPv4(0800), ARP(0806), RARP(8035), SNMP over Ethernet(814C), IPv6(86DD)
- 트레일러는 FCS(Frame Check Sequence)라고도 하는데, 데이터 전송 도중 오류가 발생하는지 확인하는 용도로 사용
- 이처럼 이더넷 헤더와 트레일러가 추가된 데이터를 **프레임**이라고 한다.
- 목적지 MAC주소와 동일하지 않은 컴퓨터에서는 데이터를 파기한다.



## LESSON 14 스위치의 구조



### MAC 주소 테이블

- 스위치는 데이터 링크 계층에서 동작하고 레이어 2 스위치 또는 스위칭 허브라고도 불린다.

- 스위치 내부에는 MAC 주소 테이블이 있는데, 스위치의 포트 번호와 해당 포트에 연결되어 있는 컴퓨터의 MAC 주소가 등록되는 데이터베이스다.

- 스위치의 전원을 켠 상태에서는 MAC 주소 테이블에 아무 것도 등록되어 있지 않으나, 컴퓨터에서 목적지 MAC 주소가 추가된 프레임이라는 데이터가 전송되면 MAC 주소 테이블을 확인하고 출발지 MAC 주소가 등록되어 있지 않으면 MAC 주소를 포트와 함께 등록 => **MAC 주소 학습 기능**

- 하지만 데이터를 전송한 시점에서는 수신하는 컴퓨터의 목적지 MAC 주소가 MAC 주소 테이블에 등록되어 있지 않아 송신 포트 이외의 포트에 데이터(프레임)이 전송되는데 이러한 전송을 **플러딩**이라고 한다.

- MAC 주소 테이블에 전송 대상 컴퓨터의 MAC 주소가 등록되어 있으면 해당 컴퓨터에만 데이터 전송 

  => **MAC 주소 필터링**



## LESSON 15 데이터가 케이블에서 충돌하지 않는 구조



### 전이중 통신

- 데이터의 송수신을 동시에 통신하는 방식
- 충돌이 발생하지 않는다.
- 컴퓨터 간을 직접 랜 케이블로 연결하는 방식
- 스위치도 전이중 방식 가능



### 반이중 통신

- 회선 하나로 송신과 수신을 번갈아가면서 통신하는 방식
- 동시에 전송하면 충돌이 발생한다.
- 허브 내부는 송수신이 나누어져 있지 않기 때문에 충돌을 방지하기 위해 반이중 통신 방식을 사용
- 허브를 사용하면 충돌이 생겨 네트워크 지연이 발생하여 최근에는 스위치를 사용하는 것이 표준



### 충돌 도메인

- 데이터 충돌이 발생할 때 그 영향이 미치는 범위를 **충돌 도메인**이라고 한다.
- 허브에서 충돌이 발생할 경우 연결되어 있는 컴퓨터 전체가 하나의 충돌 도메인이 된다.
- 스위치의 경우 각각의 컴퓨터가 충돌 도메인



### ARP(Address Resolution Protocol)

- 목적지 컴퓨터의 IP 주소를 이용하여 MAC 주소를 찾기 위한 프로토콜
- 이더넷 프레임을 전송하려면 목적지 컴퓨터의 MAC 주소를 지정해야 한다.
- 출발지 컴퓨터가 목적지 주소를 모르면 MAC 주소를 알아내기 위해 네트워크에 브로드캐스트를 하는데 이를 **ARP 요청** 이라고 한다.
- 지정된 IP 주소를 갖고 있는  컴퓨터는 MAC 주소를 응답으로 보내는데 이를 **ARP 응답**이라고 한다.



## LESSON 16 이더넷의 종류와 특징



### 이더넷 규격

- 통신 속도, 전송방식, 케이블로 표기한다.
  - ex) 10{통신 속도} - BASE{전송방식} - T{케이블}
  - 케이블에서 하이픈(-) 뒤는 케이블 길이나 케이블 종류를 나타내는데 케이블 최대 길이 100m를 단위로 한다. -T는 UTP 케이블을 의미한다.

